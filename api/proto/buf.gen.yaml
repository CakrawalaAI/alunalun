# Buf code generation configuration
# This file defines how to generate code from your proto files
# Run with: buf generate

version: v1

# Enable managed mode for consistent imports across languages
managed:
  enabled: true
  go_package_prefix:
    # Update this to match your Go module path
    default: github.com/ckrwl/alunalun/api/gen

plugins:
  # Go code generation
  - plugin: buf.build/protocolbuffers/go
    out: gen/go
    opt:
      - paths=source_relative
  
  # Go gRPC code generation
  - plugin: buf.build/grpc/go
    out: gen/go
    opt:
      - paths=source_relative
  
  # Optional: gRPC-Gateway for REST API generation
  # Uncomment if you want to expose REST endpoints
  # - plugin: buf.build/grpc-ecosystem/gateway
  #   out: gen/go
  #   opt:
  #     - paths=source_relative
  #     - generate_unbound_methods=true
  
  # Optional: OpenAPI/Swagger documentation
  # - plugin: buf.build/grpc-ecosystem/openapiv2
  #   out: gen/openapi
  #   opt:
  #     - allow_merge=true
  #     - merge_file_name=api
  
  # Optional: TypeScript/JavaScript client generation
  # - plugin: buf.build/connectrpc/es
  #   out: gen/ts
  #   opt:
  #     - target=ts
  
  # Optional: Python generation
  # - plugin: buf.build/protocolbuffers/python
  #   out: gen/python
  # - plugin: buf.build/grpc/python
  #   out: gen/python