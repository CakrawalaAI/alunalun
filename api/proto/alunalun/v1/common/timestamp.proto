syntax = "proto3";

package alunalun.v1.common;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

option go_package = "github.com/ckrwl/alunalun/api/gen/go/alunalun/v1/common;common";

// DateRange represents a time period between two dates
// Useful for filtering and analytics queries
message DateRange {
  // Start of the range (inclusive)
  google.protobuf.Timestamp start = 1;
  
  // End of the range (exclusive)
  google.protobuf.Timestamp end = 2;
}

// TimePeriod represents a relative time period
// Useful for queries like "last 7 days" or "last month"
message TimePeriod {
  // The duration of the period
  google.protobuf.Duration duration = 1;
  
  // Reference point for the period
  enum Reference {
    REFERENCE_UNSPECIFIED = 0;
    REFERENCE_NOW = 1;          // From current time
    REFERENCE_TODAY = 2;        // From start of today
    REFERENCE_THIS_WEEK = 3;    // From start of this week
    REFERENCE_THIS_MONTH = 4;   // From start of this month
    REFERENCE_THIS_YEAR = 5;    // From start of this year
  }
  Reference reference = 2;
}

// Timestamps represents common timestamp fields for entities
// Include this as a field in your entities instead of repeating these fields
message Timestamps {
  // When the entity was created
  google.protobuf.Timestamp created_at = 1;
  
  // When the entity was last updated
  google.protobuf.Timestamp updated_at = 2;
  
  // When the entity was deleted (for soft deletes)
  // If not null, the entity is considered deleted
  google.protobuf.Timestamp deleted_at = 3;
}

// AuditInfo provides audit trail information
// Useful for compliance and debugging
message AuditInfo {
  // User who created the entity
  string created_by = 1;
  
  // User who last updated the entity
  string updated_by = 2;
  
  // User who deleted the entity
  string deleted_by = 3;
  
  // Timestamp information
  Timestamps timestamps = 4;
  
  // Version number for optimistic locking
  int64 version = 5;
  
  // Request ID that created/modified this entity
  // Useful for tracing and debugging
  string request_id = 6;
}